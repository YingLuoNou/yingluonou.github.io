<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ç”Ÿå‘½æ¸¸æˆ | YangLuoNou's Blog</title><meta name="author" content="YangLuoNou"><meta name="copyright" content="YangLuoNou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="#gol-wrapper.gol-fullscreen-mode{position:fixed !important;top:0 !important;left:0 !important;width:100vw !important;height:100vh !important;max-height:none !important;z-index:2147483647 !important">
<meta property="og:type" content="website">
<meta property="og:title" content="ç”Ÿå‘½æ¸¸æˆ">
<meta property="og:url" content="https://www.yangluonou.space/tools/life-game/index.html">
<meta property="og:site_name" content="YangLuoNou&#39;s Blog">
<meta property="og:description" content="#gol-wrapper.gol-fullscreen-mode{position:fixed !important;top:0 !important;left:0 !important;width:100vw !important;height:100vh !important;max-height:none !important;z-index:2147483647 !important">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/87926896?s=96&v=4">
<meta property="article:published_time" content="2026-01-02T08:17:40.000Z">
<meta property="article:modified_time" content="2026-01-02T09:49:03.009Z">
<meta property="article:author" content="YangLuoNou">
<meta property="article:tag" content=" ç”µå­, ç”µå­æŠ€æœ¯, ç½‘ç»œæŠ€æœ¯, ç¼–ç¨‹, blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars.githubusercontent.com/u/87926896?s=96&v=4"><script type="application/ld+json"></script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://www.yangluonou.space/tools/life-game/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.4/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#1B0C09')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ç”Ÿå‘½æ¸¸æˆ',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'page'
}</script><link rel="stylesheet" href="/css/normal.css"><link rel="stylesheet" href="/css/festival-spring.css"><meta name="generator" content="Hexo 8.1.1"></head><body><div id="web_bg" style="background-image: url(https://random-img-api.yangluonou.space/bg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://avatars.githubusercontent.com/u/87926896?s=96&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/fly_guide/"><i class="fa-fw fas fa-book"></i><span> é£æ§æ•™ç¨‹</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder-open"></i><span> å·¥å…·</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tools/pomodoro/"><span> ğŸ…ç•ªèŒ„é’Ÿbeta</span></a></li><li><a class="site-page child" href="/tools/life-game/"><span> ç”Ÿå‘½æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">YangLuoNou's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/fly_guide/"><i class="fa-fw fas fa-book"></i><span> é£æ§æ•™ç¨‹</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder-open"></i><span> å·¥å…·</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tools/pomodoro/"><span> ğŸ…ç•ªèŒ„é’Ÿbeta</span></a></li><li><a class="site-page child" href="/tools/life-game/"><span> ç”Ÿå‘½æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><h1 class="title-seo">ç”Ÿå‘½æ¸¸æˆ</h1></header><main class="layout hide-aside" id="content-inner"><div id="page"><div class="page-title">ç”Ÿå‘½æ¸¸æˆ</div><div class="container" id="article-container">
<div id="gol-wrapper" style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif;border:1px solid #444;background:#000;position:relative;width:100%;height:600px;max-height:85vh;display:flex;flex-direction:column;user-select:none;overflow:hidden;">
<style>
#gol-wrapper.gol-fullscreen-mode{position:fixed !important;top:0 !important;left:0 !important;width:100vw !important;height:100vh !important;max-height:none !important;z-index:2147483647 !important;border:none !important;margin:0 !important;background:#000 !important;}
#gol-canvas{flex:1;display:block;cursor:default;width:100%;height:0;min-height:0;image-rendering:pixelated;}
.gol-toolbar-top{position:absolute;top:0;left:0;right:0;padding:8px;background:linear-gradient(to bottom,rgba(0,0,0,0.9),transparent);display:flex;justify-content:space-between;align-items:flex-start;pointer-events:none;z-index:10;}
.gol-toolbar-right{display:flex;gap:6px;pointer-events:auto;align-items:center;}
#gol-wrapper:hover .gol-toolbar-top{opacity:1;}
.gol-controls{background:#1a1a1a;padding:4px 8px;display:flex;flex-wrap:wrap;gap:8px;align-items:center;border-top:1px solid #333;font-size:12px;color:#ccc;justify-content:center;z-index:11;}
.gol-btn{padding:4px 10px;border:none;border-radius:4px;cursor:pointer;font-weight:600;color:white;transition:filter 0.2s;white-space:nowrap;font-size:12px;}
.gol-btn:hover{filter:brightness(1.2);}
.gol-btn-green{background:#28a745;}
.gol-btn-red{background:#dc3545;}
.gol-btn-gray{background:#555;}
.gol-btn-blue{background:#17a2b8;}
.gol-btn-purple{background:#6f42c1;}
.gol-group{display:flex;align-items:center;gap:4px;background:#2c2c2c;padding:2px 6px;border-radius:4px;}
#gol-wrapper input[type="number"]{width:30px;background:#444;border:none;color:white;text-align:center;border-radius:2px;}
#gol-wrapper input[type="color"]{width:20px;height:20px;border:none;background:none;padding:0;cursor:pointer;}
#gol-wrapper input[type="range"]{width:60px;height:4px;vertical-align:middle;}
.gol-icon-btn{background:rgba(255,255,255,0.2);border:none;color:white;width:28px;height:28px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;}
.gol-icon-btn:hover{background:rgba(255,255,255,0.4);}
.gol-mode-bar{pointer-events:auto;display:flex;gap:5px;background:rgba(0,0,0,0.5);padding:4px;border-radius:20px;backdrop-filter:blur(4px);}
@media (max-width: 600px) {
#gol-wrapper { height: auto !important; aspect-ratio: 3/5; }
.gol-controls { padding: 6px 4px; gap: 5px; justify-content: space-around; }
.gol-btn { padding: 6px 8px; font-size: 11px; }
.gol-group { padding: 4px; font-size: 11px; }
}
</style>
<div class="gol-toolbar-top">
<div class="gol-mode-bar">
<button class="gol-icon-btn" id="btn-mode-page" onclick="gol.setMode('page')" title="æµè§ˆæ¨¡å¼">ğŸ‘†</button>
<button class="gol-icon-btn" id="btn-mode-draw" onclick="gol.setMode('draw')" title="ç»˜å›¾æ¨¡å¼">âœï¸</button>
<button class="gol-icon-btn" id="btn-mode-pan" onclick="gol.setMode('pan')" title="ç§»åŠ¨æ¨¡å¼">âœ‹</button>
</div>
<div class="gol-toolbar-right">
<div class="gol-group" title="é¢œè‰²: æ´»ä½“ / èƒŒæ™¯"><input type="color" id="gol-color-cell" value="#00FF80"><span style="color:#555">|</span><input type="color" id="gol-color-bg" value="#000000"></div>
<button class="gol-icon-btn" onclick="gol.resetView()" title="é‡ç½®è§†é‡">ğŸ¯</button>
<button class="gol-icon-btn" onclick="gol.screenshot()" title="æˆªå›¾">ğŸ“·</button>
</div>
</div>
<canvas id="gol-canvas"></canvas>
<div class="gol-controls">
<button onclick="gol.togglePlay()" id="gol-btn-play" class="gol-btn gol-btn-green">å¼€å§‹</button>
<button onclick="gol.step()" class="gol-btn gol-btn-gray">å•æ­¥</button>
<button onclick="gol.clear()" class="gol-btn gol-btn-red">æ¸…ç©º</button>
<button onclick="gol.randomize()" class="gol-btn gol-btn-blue">éšæœº</button>
<div class="gol-group"><input type="number" id="gol-inp-size" value="10" min="1" max="100" style="width:auto;"><span style="cursor:pointer;color:#ffc107;font-weight:bold;font-size:10px;" onclick="gol.setMax()">[MAX]</span></div>
<div class="gol-group">ç¼©æ”¾<input type="range" id="gol-inp-zoom" min="1" max="100" value="10" title="ç¼©æ”¾"></div>
<div class="gol-group" title="FPS"><input type="range" id="gol-inp-fps" min="1" max="120" value="60"><span id="gol-fps-val" style="font-size:10px;min-width:15px;text-align:right;">60</span><span style="font-size:10px;color:#888;margin-left:2px;">(<span id="gol-real-fps">0</span>)</span></div>
<div class="gol-group" style="background:#444;"><label for="gol-chk-bound" style="cursor:pointer;">è¾¹ç•Œ:</label><input type="checkbox" id="gol-chk-bound" checked title="è¾¹ç•Œå¢™" style="cursor:pointer;"></div>
<button onclick="gol.toggleFullscreen()" id="gol-btn-fs" class="gol-btn gol-btn-purple">ç½‘é¡µå…¨å±</button>
<button onclick="gol.toggleMonitorFullscreen()" id="all-btn-fs" class="gol-btn gol-btn-purple">å…¨å±</button>
<div style="margin-left:auto;color:#666;font-family:monospace;font-size:10px;">C:<span id="gol-count">0</span></div>
</div>
</div>
<script>
(function(){
const wrapper=document.getElementById('gol-wrapper');
const canvas=document.getElementById('gol-canvas');
const ctx=canvas.getContext('2d',{alpha:false});
const btnPlay=document.getElementById('gol-btn-play');
const btnFs=document.getElementById('gol-btn-fs');
const btnaFs=document.getElementById('all-btn-fs');
const inpSize=document.getElementById('gol-inp-size');
const inpZoom=document.getElementById('gol-inp-zoom');
const inpFps=document.getElementById('gol-inp-fps');
const spanFps=document.getElementById('gol-fps-val');
const spanRealFps=document.getElementById('gol-real-fps');
const chkBound=document.getElementById('gol-chk-bound');
const colorCell=document.getElementById('gol-color-cell');
const colorBg=document.getElementById('gol-color-bg');
const spanCount=document.getElementById('gol-count');
const btnModes={page:document.getElementById('btn-mode-page'),draw:document.getElementById('btn-mode-draw'),pan:document.getElementById('btn-mode-pan')};
let cols,rows;let cellSize=10;let isRunning=false;let animationId;let now,then,elapsed;let fpsInterval=1000/60;
let lastFpsTime=0;let frameCount=0;
let cells,nextCells;let offCanvas,offCtx,offImgData,offBuf32;
let cellColorUint32=0xFF00FF80;let bgColorUint32=0xFF000000;
let camera={x:0,y:0,zoom:1};let drag={active:false,lx:0,ly:0};let interactionMode='page';
window.gol={
togglePlay:function(){isRunning=!isRunning;btnPlay.innerText=isRunning?"æš‚åœ":"å¼€å§‹";btnPlay.className=isRunning?"gol-btn gol-btn-gray":"gol-btn gol-btn-green";if(isRunning){then=performance.now();lastFpsTime=then;frameCount=0;loop();}},
step:function(){if(isRunning)this.togglePlay();update();draw();},
clear:function(){cells.fill(0);draw();if(isRunning)this.togglePlay();},
randomize:function(){for(let i=0;i<cells.length;i++){cells[i]=Math.random()>0.85?1:0;}draw();},
setMax:function(){inpSize.value=1;resizeCanvas(true);},
setMode:function(m){interactionMode=m;Object.values(btnModes).forEach(b=>b.style.background='rgba(255,255,255,0.2)');btnModes[m].style.background='#28a745';},
resetView:function(){camera={x:0,y:0,zoom:1};inpZoom.value=10;draw();},
toggleFullscreen:function(){const isFs=wrapper.classList.contains('gol-fullscreen-mode');if(!isFs){const ph=document.createElement('div');ph.id='gol-ph';ph.style.display='none';wrapper.parentNode.insertBefore(ph,wrapper);document.body.appendChild(wrapper);wrapper.classList.add('gol-fullscreen-mode');btnFs.innerText="é€€å‡º";}else{const ph=document.getElementById('gol-ph');if(ph){ph.parentNode.insertBefore(wrapper,ph);ph.remove();}wrapper.classList.remove('gol-fullscreen-mode');btnFs.innerText="ç½‘é¡µå…¨å±";}setTimeout(()=>{resizeCanvas(false);},50);},
toggleMonitorFullscreen:function(){if(!document.fullscreenElement){wrapper.requestFullscreen().catch(err=>{alert(`Error: ${err.message}`);});btnaFs.innerText="é€€å‡ºå…¨å±";}else{document.exitFullscreen();btnaFs.innerText="å…¨å±";}},
screenshot:function(){draw();const link=document.createElement('a');link.download=`game-of-life-${Date.now()}.png`;link.href=canvas.toDataURL();link.click();}
};
function hexToUint32(hex){const r=parseInt(hex.substr(1,2),16);const g=parseInt(hex.substr(3,2),16);const b=parseInt(hex.substr(5,2),16);return (255<<24)|(b<<16)|(g<<8)|r;}
function updateColors(){cellColorUint32=hexToUint32(colorCell.value);bgColorUint32=hexToUint32(colorBg.value);if(!isRunning)draw();}
function createGrid(w,h){return new Uint8Array(w*h);}
function resizeCanvas(forceRandom=false){
const oldCells=cells;const oldCols=cols||0;const oldRows=rows||0;cellSize=parseInt(inpSize.value)||10;if(cellSize<1)cellSize=1;
const controlsHeight=document.querySelector('.gol-controls').offsetHeight;
canvas.width=wrapper.clientWidth;canvas.height=wrapper.clientHeight-controlsHeight;
cols=Math.ceil(canvas.width/cellSize);rows=Math.ceil(canvas.height/cellSize);
cells=new Uint8Array(cols*rows);nextCells=new Uint8Array(cols*rows);
offCanvas=document.createElement('canvas');offCanvas.width=cols;offCanvas.height=rows;offCtx=offCanvas.getContext('2d',{willReadFrequently:true});
offImgData=offCtx.createImageData(cols,rows);offBuf32=new Uint32Array(offImgData.data.buffer);
if(forceRandom){window.gol.randomize();}else if(oldCells&&oldCells.length>0){const offsetX=Math.floor((cols-oldCols)/2);const offsetY=Math.floor((rows-oldRows)/2);for(let y=0;y<oldRows;y++){for(let x=0;x<oldCols;x++){let newX=x+offsetX;let newY=y+offsetY;if(newX>=0&&newX<cols&&newY>=0&&newY<rows){cells[newY*cols+newX]=oldCells[y*oldCols+x];}}}}
draw();}
function update(){
let hasBoundary=chkBound.checked;let activeCount=0;const w=cols;const h=rows;
for(let y=0;y<h;y++){const yOffset=y*w;const yMinus=(y-1<0)?(hasBoundary?-1:h-1):y-1;const yPlus=(y+1>=h)?(hasBoundary?-1:0):y+1;const ymOffset=yMinus*w;const ypOffset=yPlus*w;
for(let x=0;x<w;x++){let neighbors=0;const xMinus=(x-1<0)?(hasBoundary?-1:w-1):x-1;const xPlus=(x+1>=w)?(hasBoundary?-1:0):x+1;
if(yMinus!==-1){if(xMinus!==-1)neighbors+=cells[ymOffset+xMinus];neighbors+=cells[ymOffset+x];if(xPlus!==-1)neighbors+=cells[ymOffset+xPlus];}
if(xMinus!==-1)neighbors+=cells[yOffset+xMinus];if(xPlus!==-1)neighbors+=cells[yOffset+xPlus];
if(yPlus!==-1){if(xMinus!==-1)neighbors+=cells[ypOffset+xMinus];neighbors+=cells[ypOffset+x];if(xPlus!==-1)neighbors+=cells[ypOffset+xPlus];}
const state=cells[yOffset+x];
if(state===0&&neighbors===3){nextCells[yOffset+x]=1;activeCount++;}else if(state===1&&(neighbors<2||neighbors>3)){nextCells[yOffset+x]=0;}else{nextCells[yOffset+x]=state;if(state===1)activeCount++;}
}}
let temp=cells;cells=nextCells;nextCells=temp;if(Math.random()>0.9)spanCount.innerText=activeCount;}
function draw(){
let len=cells.length;for(let i=0;i<len;i++){offBuf32[i]=cells[i]?cellColorUint32:bgColorUint32;}offCtx.putImageData(offImgData,0,0);
ctx.fillStyle=colorBg.value;ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.save();ctx.translate(canvas.width/2,canvas.height/2);ctx.scale(camera.zoom,camera.zoom);ctx.translate(-canvas.width/2+camera.x,-canvas.height/2+camera.y);
ctx.imageSmoothingEnabled=false;ctx.drawImage(offCanvas,0,0,cols,rows,0,0,canvas.width,canvas.height);
if(camera.zoom>5 && cellSize>1){ctx.strokeStyle='#333';ctx.lineWidth=0.5/cellSize;ctx.beginPath();
for(let i=0;i<=cols;i++){ctx.moveTo(i*cellSize,0);ctx.lineTo(i*cellSize,canvas.height);}
for(let i=0;i<=rows;i++){ctx.moveTo(0,i*cellSize);ctx.lineTo(canvas.width,i*cellSize);}ctx.stroke();}
ctx.restore();}
function loop(timestamp){if(!isRunning)return;animationId=requestAnimationFrame(loop);now=timestamp;elapsed=now-then;
if(elapsed>fpsInterval){then=now-(elapsed%fpsInterval);update();draw();frameCount++;if(now-lastFpsTime>=500){spanRealFps.innerText=Math.round(frameCount*1000/(now-lastFpsTime));lastFpsTime=now;frameCount=0;}}}
function getGridPos(ex,ey){
const rect=canvas.getBoundingClientRect();const cx=ex-rect.left;const cy=ey-rect.top;
const tZoom=camera.zoom;
const transX=canvas.width/2-canvas.width/2*tZoom+camera.x*tZoom;const transY=canvas.height/2-canvas.height/2*tZoom+camera.y*tZoom;
const worldX=(cx-transX)/tZoom;const worldY=(cy-transY)/tZoom;
return {x:Math.floor(worldX/cellSize),y:Math.floor(worldY/cellSize)};}
function handleInputStart(e){
if(interactionMode==='page')return;e.preventDefault();
if(interactionMode==='pan'){drag.active=true;drag.lx=e.clientX||e.touches[0].clientX;drag.ly=e.clientY||e.touches[0].clientY;canvas.style.cursor='grabbing';}
else if(interactionMode==='draw'){const pos=e.touches?e.touches[0]:e;const g=getGridPos(pos.clientX,pos.clientY);if(g.x>=0&&g.x<cols&&g.y>=0&&g.y<rows){cells[g.y*cols+g.x]=1;draw();}}}
function handleInputMove(e){
if(interactionMode==='page')return;e.preventDefault();
const clientX=e.clientX||e.touches[0].clientX;const clientY=e.clientY||e.touches[0].clientY;
if(interactionMode==='pan'&&drag.active){const dx=clientX-drag.lx;const dy=clientY-drag.ly;camera.x+=dx/camera.zoom;camera.y+=dy/camera.zoom;drag.lx=clientX;drag.ly=clientY;draw();}
else if(interactionMode==='draw'&&(e.buttons===1||e.touches)){const g=getGridPos(clientX,clientY);if(g.x>=0&&g.x<cols&&g.y>=0&&g.y<rows){cells[g.y*cols+g.x]=1;draw();}}}
function handleInputEnd(){drag.active=false;canvas.style.cursor=interactionMode==='pan'?'grab':'default';}
canvas.addEventListener('mousedown',handleInputStart);window.addEventListener('mousemove',e=>{if(e.target===canvas||drag.active)handleInputMove(e);});window.addEventListener('mouseup',handleInputEnd);
canvas.addEventListener('touchstart',handleInputStart,{passive:false});canvas.addEventListener('touchmove',handleInputMove,{passive:false});canvas.addEventListener('touchend',handleInputEnd);
canvas.addEventListener('wheel',e=>{e.preventDefault();const s=e.deltaY>0?0.9:1.1;camera.zoom*=s;camera.zoom=Math.max(0.1,Math.min(camera.zoom,50));inpZoom.value=camera.zoom*10;draw();},{passive:false});
inpSize.addEventListener('change',()=>resizeCanvas(false));
inpFps.addEventListener('input',function(){let val=parseInt(this.value);spanFps.innerText=val;fpsInterval=1000/val;});
inpZoom.addEventListener('input',function(){camera.zoom=this.value/10;draw();});
colorCell.addEventListener('input',updateColors);colorBg.addEventListener('input',updateColors);
let resizeTimeout;const resizeObserver=new ResizeObserver(()=>{clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{resizeCanvas(false);},100);});
resizeObserver.observe(wrapper);
gol.setMode('page');updateColors();resizeCanvas(false);
let midX=Math.floor(cols/2);let midY=Math.floor(rows/2);let idx=midY*cols+midX;if(cells.length>idx+2*cols+2){cells[idx]=1;cells[idx+cols+1]=1;cells[idx+2*cols-1]=1;cells[idx+2*cols]=1;cells[idx+2*cols+1]=1;draw();}
})();
</script>
</div></div></main><footer id="footer" style="background-image: url(https://random-img-api.yangluonou.space/footer);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By YangLuoNou</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.2</a></span></div><div class="footer_custom_text"><a href="/link/">å‹æƒ…é“¾æ¥</a> <br> Also by YingLuoNou!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.4/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><script src="/js/gitalk-mode-switcher.js"></script><script src="/tools/pomodoro/pomodoro.js"></script><script src="/js/festival-spring.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>