[{"title":"Hello World","url":"/2025/11/28/hello-world/","content":"网站的第一篇测试文章！！！TEST TEST TEST\n"},{"title":"配置属于自己的免费随机图库api","url":"/2025/11/29/web-develop1/","content":"前言开发本纯静态博客时，想对背景，顶图，底图等进行随机切换。由于该主题在一些地方没有添加随机图片功能，改源码又比较麻烦，所以笔者打算部署一个自己的随机图库 API。笔者又没有多少米，所以依赖各大厂商的 free 套餐，部署一个免费的随机图库 API。\n想要开发一个这样的 API，对于我来说，有以下需求：\n\n随机返回图片\n对图片进行分类\n部署简单\n免费，免费，还是免费\n\n通过查询，最终选择了 Cloudflare 的 Workers &amp; Pages 进行云部署 JS 代码 + GitHub 仓库 存放图片的方案。\n部署教程步骤一：创建 GitHub 图片仓库注册登录 Cloudflare 和 GitHub 就不再赘述。\n首先，在 GitHub 中创建一个图片仓库，可以参考以下文件夹结构：\n├───test │   ├───1.jpg│   ├───2.jpg│   ├───3.jpg├───background|   ├───1.jpg|   ├───2.jpg|   ├───3.jpg......\n即直接按分类作为仓库目录存放图片，图片格式为 数字+后缀名。\n步骤二：部署 Cloudflare Worker接下来，进入 Cloudflare 的 Workers &amp; Pages 页面，依次选择：\n\n新建应用 (Create application)\nStart with Hello World!\n起一个 Worker 名字，点击 Deploy\n\n\n步骤三：替换 Worker 代码点开你刚刚创建的 Worker，点击右上角的 Edit code，替换以下代码：\n// ---------------------- 核心配置区 ----------------------// 1. **新的配置**：const GITHUB_USERNAME = &#x27;UserName&#x27;;   // 例如：UserAconst REPO_NAME = &#x27;image-gallery&#x27;;             // 仓库名称 例如：image-galleryconst REPO_BRANCH = &#x27;main&#x27;;                   // 仓库分支 (通常是 main)// 构造 Raw Content Base URLconst BASE_DOMAIN = `https://raw.githubusercontent.com/$&#123;GITHUB_USERNAME&#125;/\\$&#123;REPO_NAME&#125;/$&#123;REPO_BRANCH&#125;`;// 2. 分类配置：保持不变const CATEGORIES = &#123;    // 接口路径: /api/test 或 /test    &#x27;test&#x27;: &#123;        count: 2,          //此处图片数量必须填写正确        path: &#x27;/test/&#x27;, // 注意：这里的路径是相对于仓库根目录        ext: &#x27;.png&#x27;             &#125;,    // 接口路径: /api/cats 或 /cats    // &#x27;cats&#x27;: &#123;    //     count: 8,               //     path: &#x27;/cats/&#x27;,          //     ext: &#x27;.jpg&#x27;    // &#125;,    // ... 根据需要添加&#125;;const DEFAULT_CATEGORY_KEY = &#x27;test&#x27;;// ------------------------------------------------------addEventListener(&#x27;fetch&#x27;, event =&gt; &#123;    event.respondWith(handleRequest(event.request));&#125;);async function handleRequest(request) &#123;    const url = new URL(request.url);    const pathSegments = url.pathname.split(&#x27;/&#x27;).filter(Boolean);    let categoryKey = DEFAULT_CATEGORY_KEY;        if (pathSegments.length &gt; 0) &#123;        categoryKey = pathSegments[pathSegments.length - 1];     &#125;        const categoryConfig = CATEGORIES[categoryKey];    if (!categoryConfig) &#123;        return new Response(`Error: Category &quot;$&#123;categoryKey&#125;&quot; not found.`, &#123; status: 404 &#125;);    &#125;    const randomIndex = Math.floor(Math.random() * categoryConfig.count) + 1;    // 4. 构造最终的图片 URL (使用 Raw Content 域名)    const targetURL =         BASE_DOMAIN +         categoryConfig.path +         randomIndex +         categoryConfig.ext; // 最终URL示例: https://raw.githubusercontent.com/UserA/image-gallery/main/landscape/5.jpg    // 5. 返回 302 重定向    return Response.redirect(targetURL, 302);&#125;\n\n步骤四：完成部署修改完成后，点击 Deploy，等待部署完成，即可获得你自己的随机图库 API。\nFree 套餐有每天 10 万次请求限制，足够大部分小型博客使用。\n如果您觉得这篇文章对您有帮助的话，不妨收藏该页面，分享给更多朋友，感谢您的阅读。有问题欢迎评论区留言，共同交流。  \n评论区请友善交流，无关话题将会被删除\n","categories":["博客开发记录"],"tags":["api","图库","随机图库","免费"]}]